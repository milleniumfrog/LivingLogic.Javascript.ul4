{"version":3,"file":"ul4.js","sources":["../../src/ul4.ts"],"sourcesContent":["const _js_Date = Date;\ntype _js_date = Date;\n\nnamespace helpers {\n\t/**\n\t * checks if map exists when loading\n\t */\n\tconst _havemap: boolean = (typeof(Map) === \"function\" && typeof(Map.prototype.forEach) === \"function\");\n\t\n\t/**\n\t * checks if maps constructor exists when loading\n\t */\n    const _havemapconstructor: boolean = (function () {\n        if (_havemap)\n\t    {\n\t\t    try\n\t\t    {\n\t\t    \tif (new Map([[1, 2]]).size == 1)\n\t\t    \t\treturn true;\n\t\t    }\n\t\t    catch (error)\n\t\t    {\n\t\t    }\n        }\n        return false;\n\t})()\n\t\n\t/**\n\t * checks if set exists when loading\n\t */\n    const _haveset: boolean = (typeof(Set) === \"function\" && typeof(Set.prototype.forEach) === \"function\");\n\t\n\t/**\n\t * checks if set constructor exists when loading\n\t */\n\tconst _havesetconstructor: boolean = (function () {\n        if (_haveset)\n\t    {\n\t\t    try\n\t    \t{\n\t    \t\tif (new Set([1, 2]).size == 2)\n\t    \t\t\treturn true;\n\t    \t}\n\t\t    catch (error)\n\t\t    {\n\t\t    }\n        }\n        return false;\n\t})()\n\t\n\t/**\n\t * make a Maplike\n\t * @param {any[]} items \n\t */\n\tconst _makemap: (...items: any[]) => Map<any,any> | any = (function () {\n\t\tif( _havemap ) {\n\t\t\treturn function( ...items: any[] ) {\n\t\t\t\tlet map: Map<any,any> = new Map();\n\n\t\t\t\tfor (let [key, value] of items)\n\t\t\t\t\tmap.set(key, value);\n\t\t\t\treturn map;\t\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn function( ...items: any[] ) {\n\t\t\t\tlet map: any = {};\n\n\t\t\t\tfor (let [key, value] of items)\n\t\t\t\t\tmap[key] = value;\n\t\t\t\treturn map;\n\t\t\t}\n\t\t}\n\t})()\n\t\n\t/**\n\t * set a value in a Maplike\n\t */\n\texport const _setmap: (map: Map<string, any> | any, key: string, value: any) => void = (function () {\n\t\tif( _havemap ) {\n\t\t\treturn function (map: Map<string, any>, key: string, value: any) {\n\t\t\t\tmap.set(key, value);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn function( map: object, key: string, value: any) {\n\t\t\t\t(<any>map)[key] = value;\n\t\t\t}\n\t\t}\n\t})();\n\t/**\n\t * create empty Maplike\n\t */\n\texport const _emptymap: () => Map<string, any> | any = (function() {\n\t\tif( _havemap ) {\n\t\t\treturn function() {\n\t\t\t\treturn new Map();\n\t\t\t}\n\t\t} \n\t\telse {\n\t\t\treturn function() {\n\t\t\t\treturn <any>{};\n\t\t\t}\n\t\t}\n\t})()\n\t/**\n\t * get value for a key from a Maplike\n\t */\n\tconst _getmap: ( map: Map<string, any> |  any, key: string ) => any = (function() {\n\t\tif( _havemap ) {\n\t\t\treturn function( map: Map<string, any>, key: string) {\n\t\t\t\treturn map.get( key );\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn function( map: any, key: string ) {\n\t\t\t\treturn map[key];\n\t\t\t}\n\t\t}\n\t})()\n\t/**\n\t * create empty Set\n\t */\n\texport const _emptyset: () => Set<any> | ul4._Set = (function() {\n\t\tif( _haveset ) {\n\t\t\treturn function () {\n\t\t\t\treturn new Set();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn function () {\n\t\t\t\treturn new ul4._Set();\n\t\t\t}\n\t\t}\n\t})()\n\t/**\n\t * make a set\n\t * @param {string[]} items\n\t */\n\texport function _makeset(...items: string[]) {\n\t\tlet set: Set<string> | ul4._Set = _emptymap();\n\t\tfor( let item of items ) {\n\t\t\tset.add( item );\n\t\t}\n\t\treturn set;\n\t}\n}\nexport namespace ul4 {\n\n\t// This is outside of ``Proto`` on purpose\n\t// This way reactive frameworks like ``Vue.js`` don't get to see it\n\t// and complain about mutating render functions when those create new objects.\n\tlet _nextid: number = 1;\n\n\t// --FUNCTIONS--\n\n\texport function _unorderable( operator: string, obj1: any, obj2: any ) {\n\t\tthrow new ul4.TypeError(\"unorderable types: \" + ul4._type(obj1) + \" \" + operator + \" \" + ul4._type(obj2));\n\t}\n\n\texport function expose( f: any, signature: any, options?: any ) {\n\t\toptions = options || {};\n\t\tif (options.name)\n\t\t\tf._ul4_name = options.name;\n\t\tif (ul4._islist(signature))\n\t\t\tsignature = new ul4.Signature(...signature);\n\t\tf._ul4_signature = signature;\n\t\tf._ul4_needsobject = options.needsobject || false;\n\t\tf._ul4_needscontext = options.needscontext || false;\n\t}\n\n\texport function _find( obj: any, sub: any,  start: number | null = null, end: number | null = null ) {\n\t\tif (start === null)\n\t\t\tstart = 0;\n\t\tif (end === null)\n\t\t\tend = <number>obj.length || 0;\n\t\t\n\t\tif (start < 0)\n\t\t\tstart += obj.length;\n\t\tif (end < 0)\n\t\t\tend += obj.length;\n\t\tstart = ul4._bound(start, obj.length);\n\t\tend = ul4._bound(end, obj.length);\n\n\t\tif (start !== 0 || end !== obj.length)\n\t\t{\n\t\t\tif (typeof(obj) == \"string\")\n\t\t\t\tobj = obj.substring(start, end);\n\t\t\telse\n\t\t\t\tobj = obj.slice(start, end);\n\t\t}\n\t\tlet result = obj.indexOf(sub);\n\t\tif (result !== -1)\n\t\t\tresult += start;\n\t\treturn result;\n\t}\n\n\texport function _eq( obj1: any, obj2: any ): boolean {\n\t\tlet numbertypes: string[] = [ \"boolean\", \"number\" ];\n\t\tif( obj1 && typeof( obj1.__eq__ ) === \"function\" )\n\t\t\treturn obj1.__eq__(obj2);\n\t\telse if (obj2 && typeof(obj2.__eq__) === \"function\")\n\t\t\treturn obj2.__eq__(obj1);\n\t\telse if (obj1 === null)\n\t\t\treturn obj2 === null;\n\t\telse if (numbertypes.indexOf(typeof(obj1)) != -1) {\n\t\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\t\treturn obj1 == obj2;\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\t\telse if (typeof(obj1) === \"string\") {\n\t\t\tif (typeof(obj2) === \"string\")\n\t\t\t\treturn obj1 == obj2;\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\t\telse if (ul4._isdatetime(obj1))\n\t\t{\n\t\t\tif (ul4._isdatetime(obj2))\n\t\t\t\treturn obj1.getTime() == obj2.getTime();\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\t\telse if (ul4._islist(obj1))\n\t\t{\n\t\t\tif (ul4._islist(obj2))\n\t\t\t{\n\t\t\t\t// Shortcut, if it's the same object\n\t\t\t\tif (obj1 === obj2)\n\t\t\t\t\treturn true;\n\t\t\t\tif (obj1.length != obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t\t{\n\t\t\t\t\tif (!ul4._eq(obj1[i], obj2[i])) // This might lead to infinite recursion and a stackoverflow, but it does in all implementations\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\t\telse if (ul4._isobject(obj1))\n\t\t{\n\t\t\tif (ul4._isobject(obj2))\n\t\t\t{\n\t\t\t\t// Shortcut, if it's the same object\n\t\t\t\tif (obj1 === obj2)\n\t\t\t\t\treturn true;\n\t\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\t\tfor (let key in obj1)\n\t\t\t\t{\n\t\t\t\t\tif (obj2.hasOwnProperty(key))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!ul4._eq(obj1[key], obj2[key]))\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// Test that each attribute of ``obj2`` is alos in ``obj1`` (the value has been tested before)\n\t\t\t\tfor (let key in obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (ul4._ismap(obj2))\n\t\t\t{\n\t\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\t\tfor (let key in obj1)\n\t\t\t\t{\n\t\t\t\t\tif (obj2.has(key))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!ul4._eq(obj1[key], obj2.get(key)))\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// Test that each attribute of ``obj2`` is alos in ``obj1`` (the value has been tested before)\n\t\t\t\tlet result = true;\n\t\t\t\tobj2.forEach(function(value: any, key: any){\n\t\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\t\tresult = false;\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\t\telse if (ul4._ismap(obj1))\n\t\t{\n\t\t\tif (ul4._isobject(obj2))\n\t\t\t{\n\t\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\t\tlet result = true;\n\t\t\t\tobj1.forEach(function(value: any, key: any){\n\t\t\t\t\tif (result) // Skip code, if result is already ``false``\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!obj2.hasOwnProperty(key))\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\telse if (!ul4._eq(obj1.get(key), obj2[key]))\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (!result)\n\t\t\t\t\treturn false;\n\t\t\t\t// Test that each attribute of ``obj2`` is alos in ``obj1`` (the value has been tested before)\n\t\t\t\tfor (let key in obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(key))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (ul4._ismap(obj2))\n\t\t\t{\n\t\t\t\t// Shortcut, if it's the same object\n\t\t\t\tif (obj1 === obj2)\n\t\t\t\t\treturn true;\n\t\t\t\tif (obj1.size != obj2.size)\n\t\t\t\t\treturn false;\n\t\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\t\tlet result = true;\n\t\t\t\tobj1.forEach(function(value: any, key: any){\n\t\t\t\t\tif (result) // Skip code, if result is already ``false``\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!obj2.has(key))\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\telse if (!ul4._eq(obj1.get(key), obj2.get(key)))\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\t\telse if (ul4._isset(obj1))\n\t\t{\n\t\t\t// We don't have to test for ``ul4._Set`` as ``ul4._Set`` implements ``__eq__``\n\t\t\tif (ul4._isset(obj2))\n\t\t\t{\n\t\t\t\t// Shortcut, if it's the same object\n\t\t\t\tif (obj1 === obj2)\n\t\t\t\t\treturn true;\n\t\t\t\tif (obj1.size != obj2.size)\n\t\t\t\t\treturn false;\n\t\t\t\tlet result = true;\n\t\t\t\tobj1.forEach(function(value: any){\n\t\t\t\t\tif (result) // Skip code, if result is already ``false``\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\treturn obj1 === obj2;\n\t}\n\n\t/**\n\t * Clip a number to the range [0;max)\n\t * @param value \n\t * @param upper \n\t */\n\texport function _bound( value: number, upper: number ): number {\n\t\tif (value < 0)\n\t\t\treturn 0;\n\t\telse if (value > upper)\n\t\t\treturn upper;\n\t\telse\n\t\t\treturn value;\n\n\t}\n\n\texport function _count(obj: any, sub: any, start: number | null =null, end: number | null =null)\n\t{\n\t\tif (start === null)\n\t\t\tstart = 0;\n\t\tif (start < 0)\n\t\t\tstart += obj.length;\n\n\t\tif (end === null)\n\t\t\tend = obj.length || 0;\n\t\tif (<number>end < 0)\n\t\t\tend += obj.length;\n\t\t// cast end to number\n\t\tlet isstr = ul4._isstr(obj);\n\n\t\tif (isstr && !sub.length)\n\t\t{\n\t\t\tif (<number>end < 0 || start > obj.length || start > <number>end)\n\t\t\t\treturn 0;\n\t\t\tlet result = <number>end - start + 1;\n\t\t\tif (result > obj.length + 1)\n\t\t\t\tresult = obj.length + 1;\n\t\t\treturn result;\n\t\t}\n\n\t\tstart = ul4._bound(start, obj.length);\n\t\tend = ul4._bound(<number>end, obj.length);\n\n\t\tlet count = 0;\n\t\tif (ul4._islist(obj))\n\t\t{\n\t\t\tfor (let i = start; (<number>i) < (<number>end); ++(<number>i))\n\t\t\t{\n\t\t\t\tif (ul4._eq(obj[(<number>i)], sub))\n\t\t\t\t\t++count;\n\t\t\t}\n\t\t\treturn count;\n\t\t}\n\t\telse // string\n\t\t{\n\t\t\tlet lastIndex = start;\n\n\t\t\tfor (;;)\n\t\t\t{\n\t\t\t\tlastIndex = obj.indexOf(sub, lastIndex);\n\t\t\t\tif (lastIndex == -1)\n\t\t\t\t\tbreak;\n\t\t\t\tif (lastIndex + sub.length > <number>end)\n\t\t\t\t\tbreak;\n\t\t\t\t++count;\n\t\t\t\tlastIndex += sub.length;\n\t\t\t}\n\t\t\treturn count;\n\t\t}\n\t};\n\n\texport function _isul4set( obj: any ): boolean {\n\t\treturn (obj instanceof ul4._Set);\n\t}\n\t/**\n\t * check if type is string\n\t * @param obj \n\t */\n\texport function _isstr( obj: any ): boolean {\n\t\treturn typeof( obj ) === \"string\";\n\t}\n\t// TODO\n\texport function _iscolor( obj: any ): boolean {\n\t\treturn false;\n\t}\n\n\t// TODO\n\texport function _isdate( obj: any ): boolean {\n\t\treturn false;\n\t}\n\n\t// TODO\n\texport function _isdatetime( obj: any ): boolean {\n\t\treturn false;\n\t}\n\n\t//TODO\n\texport function _istimedelta( obj: any ): boolean {\n\t\treturn false;\n\t}\n\n\t// TODO\n\texport function _ismonthdelta( obj: any ): boolean {\n\t\treturn false;\n\t}\n\n\texport function _islist( obj: any ): boolean {\n\t\treturn Object.prototype.toString.call(obj) == \"[object Array]\";\n\t}\n\n\texport function _ismap( obj: any ): boolean {\n\t\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.__proto__) === \"object\" && obj.__proto__ === Map.prototype;\n\t}\n\n\texport function _isdict( obj: any ): boolean {\n\t\treturn ul4._isobject(obj) || ul4._ismap(obj);\n\t}\n\n\texport function _isset( obj: any ): boolean {\n\t\treturn Object.prototype.toString.call(obj) == \"[object Set]\";\n\t}\n\n\texport function _isobject( obj: any ): boolean {\n\t\treturn Object.prototype.toString.call(obj) == \"[object Object]\" && typeof(obj.__type__) === \"undefined\" && !(obj instanceof ul4.Proto);\n\t}\n\n\texport function _isiter( obj: any ): boolean {\n\t\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.next) === \"function\";\n\t}\n\n\t/**\n\t * Return a string representation of ``obj``: If possible this should be an object literal supported by UL4, otherwise the output should be bracketed with ``<`` and ``>``\n\t * @param obj \n\t */\n\texport function _repr( obj: any ): string {\n\t\treturn ul4._repr_internal( obj, false );\n\t}\n\n\texport function _repr_internal( obj: any, ascii:boolean ) {\n\t\tif (obj === null)\n\t\t\treturn \"None\";\n\t\telse if (obj === false)\n\t\t\treturn \"False\";\n\t\telse if (obj === true)\n\t\t\treturn \"True\";\n\t\telse if (typeof(obj) === \"string\")\n\t\t\treturn ul4._str_repr(obj, ascii);\n\t\telse if (typeof(obj) === \"number\")\n\t\t\treturn \"\" + obj;\n\t\telse if (typeof(obj) === \"function\")\n\t\t\tif (obj._ul4_name || obj.name)\n\t\t\t\treturn \"<function \" + (obj._ul4_name || obj.name) + \">\";\n\t\t\telse\n\t\t\t\treturn \"<anonymous function>\";\n\t\telse if (ul4._isdate(obj))\n\t\t\treturn ul4._date_repr(obj, ascii);\n\t\telse if (ul4._isdatetime(obj))\n\t\t\treturn ul4._datetime_repr(obj, ascii);\n\t\telse if (typeof(obj) === \"undefined\")\n\t\t\treturn \"<undefined>\";\n\t\telse if (typeof(obj) === \"object\" && typeof(obj.__repr__) === \"function\")\n\t\t\treturn obj.__repr__();\n\t\telse if (ul4._islist(obj))\n\t\t\treturn ul4._list_repr(obj, ascii);\n\t\telse if (ul4._ismap(obj))\n\t\t\treturn ul4._map_repr(obj, ascii);\n\t\telse if (ul4._isset(obj))\n\t\t\treturn ul4._set_repr(obj, ascii);\n\t\telse if (ul4._isobject(obj))\n\t\t\treturn ul4._object_repr(obj, ascii);\n\t\treturn \"?\";\n\t}\n\n\texport function _object_repr( obj: any, ascii: boolean = false ): string {\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet i = 0;\n\t\tfor (let key in obj)\n\t\t{\n\t\t\tif (!obj.hasOwnProperty(key))\n\t\t\t\tcontinue;\n\t\t\tif (i++)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(ul4._repr_internal(key, ascii));\n\t\t\tv.push(\": \");\n\t\t\tv.push(ul4._repr_internal(obj[key], ascii));\n\t\t}\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\n\texport function _set_repr( obj: any, ascii: boolean = false ): string {\n\t\tlet v: any[] = [];\n\t\tv.push(\"{\");\n\t\tif (!obj.size)\n\t\t\tv.push(\"/\");\n\t\telse\n\t\t{\n\t\t\tlet i = 0;\n\t\t\tobj.forEach(function(value: any, key: any){\n\t\t\t\tif (i++)\n\t\t\t\t\tv.push(\", \");\n\t\t\t\tv.push(ul4._repr_internal(value, ascii));\n\t\t\t});\n\t\t}\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\n\texport function _map_repr( obj: any, ascii: boolean = false ): string {\n\t\tlet v: any[] = [];\n\t\tv.push(\"{\");\n\n\t\tlet i = 0;\n\t\tobj.forEach(function(value: any, key: any){\n\t\t\tif (i++)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(ul4._repr_internal(key, ascii));\n\t\t\tv.push(\": \");\n\t\t\tv.push(ul4._repr_internal(value, ascii));\n\t\t});\n\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\n\t}\n\n\texport function _list_repr( obj: any, ascii: boolean = false ): string {\n\t\tlet v: any[] = [];\n\t\tv.push(\"[\");\n\t\tfor (let i = 0; i < obj.length; ++i)\n\t\t{\n\t\t\tif (i !== 0)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(ul4._repr_internal(obj[i], ascii));\n\t\t}\n\t\tv.push(\"]\");\n\t\treturn v.join(\"\");\n\n\t}\n\n\texport function _datetime_repr( obj: any, ascii: boolean = false ): string {\n\t\tlet year = obj.getFullYear();\n\t\tlet month = obj.getMonth()+1;\n\t\tlet day = obj.getDate();\n\t\tlet hour = obj.getHours();\n\t\tlet minute = obj.getMinutes();\n\t\tlet second = obj.getSeconds();\n\t\tlet ms = obj.getMilliseconds();\n\t\tlet result = \"@(\" + year + \"-\" + ul4._lpad(month.toString(), \"0\", 2) + \"-\" + ul4._lpad(day.toString(), \"0\", 2) + \"T\";\n\n\t\tif (hour || minute || second || ms)\n\t\t{\n\t\t\tresult += ul4._lpad(hour.toString(), \"0\", 2) + \":\" + ul4._lpad(minute.toString(), \"0\", 2);\n\t\t\tif (second || ms)\n\t\t\t{\n\t\t\t\tresult += \":\" + ul4._lpad(second.toString(), \"0\", 2)\n\t\t\t\tif (ms)\n\t\t\t\t\tresult += \".\" + ul4._lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\t\t}\n\t\t}\n\t\tresult += \")\";\n\n\t\treturn result;\n\n\t}\n\n\texport function _date_repr( obj: any, ascii: boolean = false ): string {\n\t\tlet date = <_js_date>obj._date;\n\t\tlet year: number = date.getFullYear();\n\t\tlet month: number = date.getMonth()+1;\n\t\tlet day: number = date.getDate();\n\t\tlet result = \"@(\" + year + \"-\" + ul4._lpad(month.toString(), \"0\", 2) + \"-\" + ul4._lpad(day.toString(), \"0\", 2) + \")\";\n\t\treturn result;\n\n\t}\n\n\texport function _str_repr( str: string, ascii: boolean = false ): string {\n\t\tlet result: string = \"\";\n\t\tlet squote: boolean = false, dquote: boolean = false;\n\n\t\tfor (let c of str)\n\t\t{\n\t\t\tif (c == '\"')\n\t\t\t{\n\t\t\t\tdquote = true;\n\t\t\t\tif (squote)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if (c == \"'\")\n\t\t\t{\n\t\t\t\tsquote = true;\n\t\t\t\tif (dquote)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Prefer single quotes: Only use double quotes if the string contains single quotes, but no double quotes\n\t\tlet quote = (squote && !dquote) ? '\"' : \"'\";\n\n\t\tfor (let c of str)\n\t\t{\n\t\t\tswitch (c)\n\t\t\t{\n\t\t\t\tcase '\"':\n\t\t\t\t\tresult += (quote == c) ? '\\\\\"' : c;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"'\":\n\t\t\t\t\tresult += (quote == c) ? \"\\\\'\" : c;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"\\\\\":\n\t\t\t\t\tresult += \"\\\\\\\\\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"\\t\":\n\t\t\t\t\tresult += \"\\\\t\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"\\n\":\n\t\t\t\t\tresult += \"\\\\n\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"\\r\":\n\t\t\t\t\tresult += \"\\\\r\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tlet code: number = c.charCodeAt(0);\n\t\t\t\t\tlet escape;\n\t\t\t\t\tif (code < 32)\n\t\t\t\t\t\tescape = 2;\n\t\t\t\t\telse if (code < 0x7f)\n\t\t\t\t\t\tescape = 0;\n\t\t\t\t\telse if (!ascii && !/[\\u007f-\\u00a0\\u00ad\\u0378-\\u0379\\u0380-\\u0383\\u038b\\u038d\\u03a2\\u0530\\u0557-\\u0558\\u0560\\u0588\\u058b-\\u058c\\u0590\\u05c8-\\u05cf\\u05eb-\\u05ef\\u05f5-\\u0605\\u061c-\\u061d\\u06dd\\u070e-\\u070f\\u074b-\\u074c\\u07b2-\\u07bf\\u07fb-\\u07ff\\u082e-\\u082f\\u083f\\u085c-\\u085d\\u085f-\\u089f\\u08b5-\\u08e2\\u0984\\u098d-\\u098e\\u0991-\\u0992\\u09a9\\u09b1\\u09b3-\\u09b5\\u09ba-\\u09bb\\u09c5-\\u09c6\\u09c9-\\u09ca\\u09cf-\\u09d6\\u09d8-\\u09db\\u09de\\u09e4-\\u09e5\\u09fc-\\u0a00\\u0a04\\u0a0b-\\u0a0e\\u0a11-\\u0a12\\u0a29\\u0a31\\u0a34\\u0a37\\u0a3a-\\u0a3b\\u0a3d\\u0a43-\\u0a46\\u0a49-\\u0a4a\\u0a4e-\\u0a50\\u0a52-\\u0a58\\u0a5d\\u0a5f-\\u0a65\\u0a76-\\u0a80\\u0a84\\u0a8e\\u0a92\\u0aa9\\u0ab1\\u0ab4\\u0aba-\\u0abb\\u0ac6\\u0aca\\u0ace-\\u0acf\\u0ad1-\\u0adf\\u0ae4-\\u0ae5\\u0af2-\\u0af8\\u0afa-\\u0b00\\u0b04\\u0b0d-\\u0b0e\\u0b11-\\u0b12\\u0b29\\u0b31\\u0b34\\u0b3a-\\u0b3b\\u0b45-\\u0b46\\u0b49-\\u0b4a\\u0b4e-\\u0b55\\u0b58-\\u0b5b\\u0b5e\\u0b64-\\u0b65\\u0b78-\\u0b81\\u0b84\\u0b8b-\\u0b8d\\u0b91\\u0b96-\\u0b98\\u0b9b\\u0b9d\\u0ba0-\\u0ba2\\u0ba5-\\u0ba7\\u0bab-\\u0bad\\u0bba-\\u0bbd\\u0bc3-\\u0bc5\\u0bc9\\u0bce-\\u0bcf\\u0bd1-\\u0bd6\\u0bd8-\\u0be5\\u0bfb-\\u0bff\\u0c04\\u0c0d\\u0c11\\u0c29\\u0c3a-\\u0c3c\\u0c45\\u0c49\\u0c4e-\\u0c54\\u0c57\\u0c5b-\\u0c5f\\u0c64-\\u0c65\\u0c70-\\u0c77\\u0c80\\u0c84\\u0c8d\\u0c91\\u0ca9\\u0cb4\\u0cba-\\u0cbb\\u0cc5\\u0cc9\\u0cce-\\u0cd4\\u0cd7-\\u0cdd\\u0cdf\\u0ce4-\\u0ce5\\u0cf0\\u0cf3-\\u0d00\\u0d04\\u0d0d\\u0d11\\u0d3b-\\u0d3c\\u0d45\\u0d49\\u0d4f-\\u0d56\\u0d58-\\u0d5e\\u0d64-\\u0d65\\u0d76-\\u0d78\\u0d80-\\u0d81\\u0d84\\u0d97-\\u0d99\\u0db2\\u0dbc\\u0dbe-\\u0dbf\\u0dc7-\\u0dc9\\u0dcb-\\u0dce\\u0dd5\\u0dd7\\u0de0-\\u0de5\\u0df0-\\u0df1\\u0df5-\\u0e00\\u0e3b-\\u0e3e\\u0e5c-\\u0e80\\u0e83\\u0e85-\\u0e86\\u0e89\\u0e8b-\\u0e8c\\u0e8e-\\u0e93\\u0e98\\u0ea0\\u0ea4\\u0ea6\\u0ea8-\\u0ea9\\u0eac\\u0eba\\u0ebe-\\u0ebf\\u0ec5\\u0ec7\\u0ece-\\u0ecf\\u0eda-\\u0edb\\u0ee0-\\u0eff\\u0f48\\u0f6d-\\u0f70\\u0f98\\u0fbd\\u0fcd\\u0fdb-\\u0fff\\u10c6\\u10c8-\\u10cc\\u10ce-\\u10cf\\u1249\\u124e-\\u124f\\u1257\\u1259\\u125e-\\u125f\\u1289\\u128e-\\u128f\\u12b1\\u12b6-\\u12b7\\u12bf\\u12c1\\u12c6-\\u12c7\\u12d7\\u1311\\u1316-\\u1317\\u135b-\\u135c\\u137d-\\u137f\\u139a-\\u139f\\u13f6-\\u13f7\\u13fe-\\u13ff\\u1680\\u169d-\\u169f\\u16f9-\\u16ff\\u170d\\u1715-\\u171f\\u1737-\\u173f\\u1754-\\u175f\\u176d\\u1771\\u1774-\\u177f\\u17de-\\u17df\\u17ea-\\u17ef\\u17fa-\\u17ff\\u180e-\\u180f\\u181a-\\u181f\\u1878-\\u187f\\u18ab-\\u18af\\u18f6-\\u18ff\\u191f\\u192c-\\u192f\\u193c-\\u193f\\u1941-\\u1943\\u196e-\\u196f\\u1975-\\u197f\\u19ac-\\u19af\\u19ca-\\u19cf\\u19db-\\u19dd\\u1a1c-\\u1a1d\\u1a5f\\u1a7d-\\u1a7e\\u1a8a-\\u1a8f\\u1a9a-\\u1a9f\\u1aae-\\u1aaf\\u1abf-\\u1aff\\u1b4c-\\u1b4f\\u1b7d-\\u1b7f\\u1bf4-\\u1bfb\\u1c38-\\u1c3a\\u1c4a-\\u1c4c\\u1c80-\\u1cbf\\u1cc8-\\u1ccf\\u1cf7\\u1cfa-\\u1cff\\u1df6-\\u1dfb\\u1f16-\\u1f17\\u1f1e-\\u1f1f\\u1f46-\\u1f47\\u1f4e-\\u1f4f\\u1f58\\u1f5a\\u1f5c\\u1f5e\\u1f7e-\\u1f7f\\u1fb5\\u1fc5\\u1fd4-\\u1fd5\\u1fdc\\u1ff0-\\u1ff1\\u1ff5\\u1fff-\\u200f\\u2028-\\u202f\\u205f-\\u206f\\u2072-\\u2073\\u208f\\u209d-\\u209f\\u20bf-\\u20cf\\u20f1-\\u20ff\\u218c-\\u218f\\u23fb-\\u23ff\\u2427-\\u243f\\u244b-\\u245f\\u2b74-\\u2b75\\u2b96-\\u2b97\\u2bba-\\u2bbc\\u2bc9\\u2bd2-\\u2beb\\u2bf0-\\u2bff\\u2c2f\\u2c5f\\u2cf4-\\u2cf8\\u2d26\\u2d28-\\u2d2c\\u2d2e-\\u2d2f\\u2d68-\\u2d6e\\u2d71-\\u2d7e\\u2d97-\\u2d9f\\u2da7\\u2daf\\u2db7\\u2dbf\\u2dc7\\u2dcf\\u2dd7\\u2ddf\\u2e43-\\u2e7f\\u2e9a\\u2ef4-\\u2eff\\u2fd6-\\u2fef\\u2ffc-\\u3000\\u3040\\u3097-\\u3098\\u3100-\\u3104\\u312e-\\u3130\\u318f\\u31bb-\\u31bf\\u31e4-\\u31ef\\u321f\\u32ff\\u4db6-\\u4dbf\\u9fd6-\\u9fff\\ua48d-\\ua48f\\ua4c7-\\ua4cf\\ua62c-\\ua63f\\ua6f8-\\ua6ff\\ua7ae-\\ua7af\\ua7b8-\\ua7f6\\ua82c-\\ua82f\\ua83a-\\ua83f\\ua878-\\ua87f\\ua8c5-\\ua8cd\\ua8da-\\ua8df\\ua8fe-\\ua8ff\\ua954-\\ua95e\\ua97d-\\ua97f\\ua9ce\\ua9da-\\ua9dd\\ua9ff\\uaa37-\\uaa3f\\uaa4e-\\uaa4f\\uaa5a-\\uaa5b\\uaac3-\\uaada\\uaaf7-\\uab00\\uab07-\\uab08\\uab0f-\\uab10\\uab17-\\uab1f\\uab27\\uab2f\\uab66-\\uab6f\\uabee-\\uabef\\uabfa-\\uabff\\ud7a4-\\ud7af\\ud7c7-\\ud7ca\\ud7fc-\\uf8ff\\ufa6e-\\ufa6f\\ufada-\\ufaff\\ufb07-\\ufb12\\ufb18-\\ufb1c\\ufb37\\ufb3d\\ufb3f\\ufb42\\ufb45\\ufbc2-\\ufbd2\\ufd40-\\ufd4f\\ufd90-\\ufd91\\ufdc8-\\ufdef\\ufdfe-\\ufdff\\ufe1a-\\ufe1f\\ufe53\\ufe67\\ufe6c-\\ufe6f\\ufe75\\ufefd-\\uff00\\uffbf-\\uffc1\\uffc8-\\uffc9\\uffd0-\\uffd1\\uffd8-\\uffd9\\uffdd-\\uffdf\\uffe7\\uffef-\\ufffb\\ufffe-\\uffff]/.test(c))\n\t\t\t\t\t\tescape = 0;\n\t\t\t\t\telse if (code <= 0xff)\n\t\t\t\t\t\tescape = 2;\n\t\t\t\t\telse if (code <= 0xffff)\n\t\t\t\t\t\tescape = 4;\n\t\t\t\t\telse\n\t\t\t\t\t\tescape = 8;\n\n\t\t\t\t\tif (escape === 0)\n\t\t\t\t\t\tresult += c;\n\t\t\t\t\telse if (escape === 2)\n\t\t\t\t\t\tresult += \"\\\\x\" + ul4._lpad(code.toString(16), \"0\", 2);\n\t\t\t\t\telse if (escape === 4)\n\t\t\t\t\t\tresult += \"\\\\u\" + ul4._lpad(code.toString(16), \"0\", 4);\n\t\t\t\t\telse\n\t\t\t\t\t\tresult += \"\\\\U\" + ul4._lpad(code.toString(16), \"0\", 8);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn quote + result + quote;\n\t}\n\n\texport function _lpad( string: string | number, pad: string, len: number ) {\n\t\tif (typeof(string) === \"number\")\n\t\t\tstring = string.toString();\n\t\twhile (string.length < len)\n\t\t\tstring = pad + string;\n\t\treturn string;\n\t}\n\n\texport function _type( obj: any ): string {\n\t\tif (obj === null)\n\t\t\treturn \"none\";\n\t\telse if (obj === false || obj === true)\n\t\t\treturn \"bool\";\n\t\telse if (typeof(obj) === \"undefined\")\n\t\t\treturn \"undefined\";\n\t\telse if (typeof(obj) === \"number\")\n\t\t\treturn Math.round(obj) == obj ? \"int\" : \"float\";\n\t\telse if (typeof(obj) === \"function\")\n\t\t\treturn \"function\";\n\t\telse\n\t\t{\n\t\t\tif (typeof(obj.ul4type) === \"function\")\n\t\t\t\treturn obj.ul4type();\n\t\t\telse\n\t\t\t\treturn ul4.Protocol.get(obj).ul4type();\n\t\t\treturn \"\";\n\t\t}\n\t}\n\t\n\texport function _rfind( obj: any, sub: any, start: number | null = null, end: number | null = null ) {\n\t\tif (start === null)\n\t\t\tstart = 0;\n\t\tif (end === null)\n\t\t\tend = <number>obj.length;\n\t\tif (start < 0)\n\t\t\tstart += obj.length;\n\t\tif (end < 0)\n\t\t\tend += obj.length;\n\t\tstart = ul4._bound(start, obj.length);\n\t\tend = ul4._bound(end, obj.length);\n\n\t\tif (start !== 0 || end !== obj.length)\n\t\t{\n\t\t\tif (typeof(obj) == \"string\")\n\t\t\t\tobj = obj.substring(start, end);\n\t\t\telse\n\t\t\t\tobj = obj.slice(start, end);\n\t\t}\n\t\tlet result = obj.lastIndexOf(sub);\n\t\tif (result !== -1)\n\t\t\tresult += start;\n\t\treturn result;\n\t}\n\n\texport function _iter( obj: any ): {index: number; next: Function} {\n\t\tif (typeof(obj) === \"string\" || ul4._islist(obj))\n\t\t{\n\t\t\treturn {\n\t\t\t\tindex: 0,\n\t\t\t\tnext: function()\n\t\t\t\t{\n\t\t\t\t\tif (this.index < obj.length)\n\t\t\t\t\t\treturn {value: obj[this.index++], done: false};\n\t\t\t\t\telse\n\t\t\t\t\t\treturn {done: true};\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse if (ul4._isiter(obj))\n\t\t\treturn obj;\n\t\telse if (obj !== null && typeof(obj.__iter__) === \"function\")\n\t\t\treturn obj.__iter__();\n\t\telse if (ul4._ismap(obj))\n\t\t{\n\t\t\tlet keys: string[] = [];\n\t\t\tobj.forEach(function(value: string, key: string){\n\t\t\t\tkeys.push(key);\n\t\t\t});\n\t\t\treturn {\n\t\t\t\tindex: 0,\n\t\t\t\tnext: function()\n\t\t\t\t{\n\t\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\t\treturn {done: true};\n\t\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse if (ul4._isset(obj))\n\t\t{\n\t\t\tlet values: string[] = [];\n\t\t\tobj.forEach(function(value: string, key: string){\n\t\t\t\tvalues.push(value);\n\t\t\t});\n\t\t\treturn {\n\t\t\t\tindex: 0,\n\t\t\t\tnext: function()\n\t\t\t\t{\n\t\t\t\t\tif (this.index >= values.length)\n\t\t\t\t\t\treturn {done: true};\n\t\t\t\t\treturn {value: values[this.index++], done: false};\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse if (ul4._isul4set(obj))\n\t\t{\n\t\t\treturn ul4._iter(obj.items);\n\t\t}\n\t\telse if (ul4._isobject(obj))\n\t\t{\n\t\t\tlet keys: string[] = [];\n\t\t\tfor (let key in obj)\n\t\t\t\tkeys.push(key);\n\t\t\treturn {\n\t\t\t\tindex: 0,\n\t\t\t\tnext: function()\n\t\t\t\t{\n\t\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\t\treturn {done: true};\n\t\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tthrow new ul4.TypeError(ul4._type(obj) + \" object is not iterable\");\n\t}\n\n\t// --CLASSES--\n\n\t// TODO\n\texport class PROTO {}\n\n\texport class Proto {\n\t\tpublic __id__: number;\n\n\t\tconstructor() {\n\t\t\tthis.__id__ = _nextid++;\n\t\t}\n\n\t\tul4type() {\n\t\t\treturn this.constructor.name;\n\t\t}\n\n\t\t// equality comparison of objects defaults to identity comparison\n\t\t__eq__( other: any ) {\n\t\t\treturn this === other;\n\t\t}\n\n\t\t// To overwrite equality comparison, you only have to overwrite ``__eq__``,\n\t\t// ``__ne__`` will be synthesized from that\n\t\t__ne__( other: any )\n\t\t{\n\t\t\treturn !this.__eq__(other);\n\t\t}\n\n\t\t// For other comparison operators, each method has to be implemented:\n\t\t// ``<`` calls ``__lt__``, ``<=`` calls ``__le__``, ``>`` calls ``__gt__`` and\n\t\t// ``>=`` calls ``__ge__``\n\n\t\t__bool__()\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t}\n\n\texport class Date extends Proto {\n\n\t\tpublic _date: _js_date;\n\n\t\tconstructor( year: number, month: number, day: number ) {\n\t\t\tsuper();\n\t\t\tthis._date = new _js_Date( year, month-1, day );\n\t\t}\n\n\t\tul4type() {\n\t\t\treturn \"date\";\n\t\t}\n\n\t\t__repr__() {\n\t\t\treturn '@(' + this.__str__() + \")\";\n\t\t}\n\n\t\t__str__() {\n\t\t\treturn ul4._lpad(this._date.getFullYear(), \"0\", 4) + \"-\" + ul4._lpad(this._date.getMonth()+1, \"0\", 2) + \"-\" + ul4._lpad(this._date.getDate(), \"0\", 2);\n\t\t}\n\n\t\t__eq__( other: any ) {\n\t\t\tif (other instanceof ul4.Date)\n\t\t\t\treturn this._date.getTime() === other._date.getTime();\n\t\t\treturn false;\n\t\t}\n\n\t\t__lt__( other: any ) {\n\t\t\tif (other instanceof ul4.Date)\n\t\t\t\treturn this._date < other._date;\n\t\t\tul4._unorderable(\"<\", this, other);\n\t\t}\n\n\t\t__le__( other: any ) {\n\t\t\tif (other instanceof ul4.Date)\n\t\t\t\treturn this._date <= other._date;\n\t\t\tul4._unorderable(\"<=\", this, other);\t\n\t\t}\n\n\t\t__gt__( other: any ) {\n\t\t\tif (other instanceof ul4.Date)\n\t\t\t\treturn this._date > other._date;\n\t\t\tul4._unorderable(\">\", this, other);\n\t\t}\n\n\t\t__ge__( other: any ) {\n\t\t\tif (other instanceof ul4.Date)\n\t\t\t\treturn this._date >= other._date;\n\t\t\tul4._unorderable(\">=\", this, other);\n\t\t}\n\n\t\tyear() {\n\t\t\treturn this._date.getFullYear();\n\t\t}\n\n\t\tmonth() {\n\t\t\treturn this._date.getMonth()+1;\n\t\t}\n\n\t\tday() {\n\t\t\treturn this._date.getDate();\n\t\t}\n\t}\n\n\texport class Signature extends Proto {\n\n\t\tpublic args: any[];\n\t\tpublic argNames: any;\n\t\tpublic remargs: any;\n\t\tpublic remkwargs: any;\n\n\t\tconstructor( ...args: any[] ) {\n\t\t\tsuper();\n\t\t\tthis.args = [];\n\t\t\tthis.argNames = {};\n\t\t\tthis.remargs = null;\n\t\t\tthis.remkwargs = null;\n\n\t\t\tlet nextDefault = false;\n\t\t\tlet lastArgname = null;\n\t\t\tfor (let argName of args)\n\t\t\t{\n\t\t\t\tif (nextDefault)\n\t\t\t\t{\n\t\t\t\t\tthis.args.push({name: lastArgname, defaultValue: argName});\n\t\t\t\t\tthis.argNames[lastArgname] = true;\n\t\t\t\t\tnextDefault = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (argName.substr(argName.length-1) === \"=\")\n\t\t\t\t\t{\n\t\t\t\t\t\tlastArgname = argName.substr(0, argName.length-1);\n\t\t\t\t\t\tnextDefault = true;\n\t\t\t\t\t}\n\t\t\t\t\telse if (argName.substr(0, 2) === \"**\")\n\t\t\t\t\t\tthis.remkwargs = argName.substr(2);\n\t\t\t\t\telse if (argName.substr(0, 1) === \"*\")\n\t\t\t\t\t\tthis.remargs = argName.substr(1);\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.args.push({name: argName});\n\t\t\t\t\t\tthis.argNames[argName] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Create the argument array for calling a function with this signature with the arguments available from ``args``\n\t\t */\n\t\tbindArray( name: string, args: any[], kwargs: any[] ) {\n\t\t\tlet finalargs = [];\n\t\t\tlet decname = name !== null ? name + \"() \" : \"\";\n\n\t\t\tfor (let i = 0; i < this.args.length; ++i)\n\t\t\t{\n\t\t\t\tlet arg = this.args[i];\n\t\t\t\tif (i < args.length)\n\t\t\t\t{\n\t\t\t\t\tif (kwargs.hasOwnProperty(arg.name))\n\t\t\t\t\t\tthrow new ul4.ArgumentError(decname + \"argument \" + ul4._repr(arg.name) + \" (position \" + i + \") specified multiple times\");\n\t\t\t\t\tfinalargs.push(args[i]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (kwargs.hasOwnProperty(arg.name))\n\t\t\t\t\t\tfinalargs.push(kwargs[arg.name]);\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (arg.hasOwnProperty(\"defaultValue\"))\n\t\t\t\t\t\t\tfinalargs.push(arg.defaultValue);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new ul4.ArgumentError(\"required \" + decname + \"argument \" + ul4._repr(arg.name) + \" (position \" + i + \") missing\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do we accept additional positional arguments?\n\t\t\tif (this.remargs === null)\n\t\t\t{\n\t\t\t\t// No, but we have them -> complain\n\t\t\t\tif (args.length > this.args.length)\n\t\t\t\t{\n\t\t\t\t\tlet prefix = name === null ? \"expected\" : name + \"() expects\";\n\t\t\t\t\tthrow new ul4.ArgumentError(prefix + \" at most \" + this.args.length + \" positional argument\" + (this.args.length != 1 ? \"s\" : \"\") + \", \" + args.length + \" given\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Put additional positional arguments in the call into the ``*`` argument (if there are none, this pushes an empty list)\n\t\t\t\tfinalargs.push(args.slice(this.args.length));\n\t\t\t}\n\n\t\t\t// Do we accept arbitrary keyword arguments?\n\t\t\tif (this.remkwargs === null)\n\t\t\t{\n\t\t\t\t// No => complain about unknown ones\n\t\t\t\tfor (let key in kwargs)\n\t\t\t\t{\n\t\t\t\t\tif (!this.argNames[key])\n\t\t\t\t\t{\n\t\t\t\t\t\tif (name === null)\n\t\t\t\t\t\t\tthrow new ul4.ArgumentError(\"an argument named \" + ul4._repr(key) + \" isn't supported\");\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new ul4.ArgumentError(name + \"() doesn't support an argument named \" + ul4._repr(key));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Yes => Put the unknown ones into an object and add that to the arguments array\n\t\t\t\tlet remkwargs = helpers._emptymap();\n\t\t\t\tfor (let key in kwargs)\n\t\t\t\t{\n\t\t\t\t\tif (!this.argNames[key])\n\t\t\t\t\t\thelpers._setmap(remkwargs, key, kwargs[key]);\n\t\t\t\t}\n\t\t\t\tfinalargs.push(remkwargs);\n\t\t\t}\n\n\t\t\treturn finalargs;\n\t\t}\n\t}\n\n\texport class Protocol {\n\t\tpublic static attrs: Set<string> | ul4._Set = helpers._emptyset();\n\t\tpublic static ul4type(): string {\n\t\t\treturn Protocol.constructor.name;\n\t\t}\n\t\t\n\t\tpublic static dir() {\n\t\t}\n\n\t\tpublic static get( obj: any ) {\n\t\t\tif (ul4._isstr( obj ))\n\t\t\t\treturn ul4.StrProtocol;\n\t\t\telse if ( ul4._islist(obj) )\n\t\t\t\treturn ul4.ListProtocol;\n\t\t\telse if ( ul4._isdate(obj) )\n\t\t\t\treturn ul4.DateProtocol;\n\t\t\t// else if ( ul4._isset(obj) )\n\t\t\t// \treturn ul4.SetProtocol;\n\t\t\t// else if ( ul4._ismap(obj) )\n\t\t\t// \treturn ul4.MapProtocol;\n\t\t\t// else if ( ul4._isdatetime(obj) )\n\t\t\t// \treturn ul4.DateTimeProtocol;\n\t\t\t// else if ( ul4._isobject(obj) )\n\t\t\t// \treturn ul4.ObjectProtocol;\n\t\t\t// else\n\t\t\t\treturn ul4.Protocol;\n\t\t}\n\n\t\tpublic static getattr( obj: any, attrname: string) {\n\t\t\tif (obj === null || obj === undefined )\n\t\t\t\tthrow new ul4.AttributeError(obj, attrname);\n\t\t\telse if (typeof(obj.__getattr__) === \"function\")\n\t\t\t\treturn obj.__getattr__(attrname);\n\t\t\telse if ( this.attrs.has( attrname ))\n\t\t\t{\n\t\t\t\tlet attr = (<any>this)[attrname];\n\t\t\t\tlet realattr = new Function(\n\t\t\t\t\t\"return function \" + attr.name + \" (...args: any[]) { return attr.apply(Protocol.attrs, [obj, ...args]); }\"\n\t\t\t\t);\n\t\t\t\t(<any>realattr)._ul4_name = attr._ul4_name || attr.name;\n\t\t\t\t(<any>realattr)._ul4_signature = attr._ul4_signature;\n\t\t\t\t(<any>realattr)._ul4_needsobject = attr._ul4_needsobject;\n\t\t\t\t(<any>realattr)._ul4_needscontext = attr._ul4_needscontext;\n\t\t\t\treturn realattr;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthrow new ul4.AttributeError(obj, attrname);\n\t\t}\n\n\t\tpublic static hasattr( obj: any, attrname: string ): boolean {\n\t\t\tif (obj === null || typeof(obj) === \"undefined\")\n\t\t\t\treturn false;\n\t\t\telse if (typeof(obj.__getattr__) === \"function\")\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tobj.__getattr__(attrname);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tcatch (exc)\n\t\t\t\t{\n\t\t\t\t\tif (exc instanceof ul4.AttributeError && exc.obj === obj)\n\t\t\t\t\t\treturn false;\n\t\t\t\t\telse\n\t\t\t\t\t\tthrow exc;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn (<any>this).has(attrname);\n\t\t}\n\t}\n\n\texport class DateProtocol extends Protocol {\n\t\t\n\t\tpublic static ul4type() {\n\t\t\treturn \"date\";\n\t\t}\n\t}\n\n\texport class ListProtocol extends Protocol {\n\n\t\tpublic static attrs = helpers._makeset(\n\t\t\t\"append\",\n\t\t\t\"insert\",\n\t\t\t\"pop\",\n\t\t\t\"count\",\n\t\t\t\"find\",\n\t\t\t\"rfind\"\n\t\t)\n\n\t\tpublic static ul4type() {\n\t\t\treturn \"list\";\n\t\t}\n\n\t\tpublic static append( obj: any[], items: any[] ): null {\n\t\t\tfor (let item of items)\n\t\t\t\tobj.push(item);\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic static insert( obj: any[], pos: number, items: any[] ): null {\n\t\t\tif (pos < 0)\n\t\t\t\tpos += obj.length;\n\n\t\t\tfor (let item of items)\n\t\t\t\tobj.splice(pos++, 0, item);\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic static pop( obj: any[], pos: number ): any {\n\t\t\tif (pos < 0)\n\t\t\t\tpos += obj.length;\n\n\t\t\tlet result = obj[pos];\n\t\t\tobj.splice(pos, 1);\n\t\t\treturn result;\n\t\t}\n\n\t\tpublic static count( obj: any[], sub: any[], start: number | null = null, end: number | null = null ) {\n\t\t\treturn ul4._count( obj, sub, start, end );\n\t\t}\n\n\t\tpublic static find( obj: any[], sub: any[], start: number | null = null, end: number | null = null ) {\n\t\t\treturn ul4._find(obj, sub, start, end);\n\t\t}\n\n\t\tpublic static rfind( obj: any[], sub: any[], start: number | null = null, end: number | null = null ) {\n\t\t\treturn ul4._rfind(obj, sub, start, end);\n\t\t}\n\t}\n\tul4.expose(ul4.ListProtocol.append, [\"*items\"]);\n\tul4.expose(ul4.ListProtocol.insert, [\"pos\", \"*items\"]);\n\tul4.expose(ul4.ListProtocol.pop, [\"pos=\", -1]);\n\tul4.expose(ul4.ListProtocol.count, [\"sub\", \"start=\", null, \"end=\", null]);\n\tul4.expose(ul4.ListProtocol.find, [\"sub\", \"start=\", null, \"end=\", null]);\n\tul4.expose(ul4.ListProtocol.rfind, [\"sub\", \"start=\", null, \"end=\", null]);\n\n\n\texport class StrProtocol extends Protocol {\n\n\t\tpublic static attrs = helpers._makeset(\n\t\t\t\"split\",\n\t\t\t\"rsplit\",\n\t\t\t\"splitlines\",\n\t\t\t\"strip\",\n\t\t\t\"lstrip\",\n\t\t\t\"rstrip\",\n\t\t\t\"upper\",\n\t\t\t\"lower\",\n\t\t\t\"capitalize\",\n\t\t\t\"startswith\",\n\t\t\t\"endswith\",\n\t\t\t\"replace\",\n\t\t\t\"count\",\n\t\t\t\"find\",\n\t\t\t\"rfind\",\n\t\t\t\"join\"\n\t\t);\n\n\t\tpublic static ul4type() {\n\t\t\treturn \"str\";\n\t\t}\n\n\t\tpublic static count(obj: string, sub: string, start: number | null = null, end: number | null = null ) {\n\t\t\treturn ul4._count(obj, sub, start, end);\n\t\t}\n\n\t\tpublic static find( obj: string, sub: string, start: number | null = null, end: number | null = null ) {\n\t\t\treturn ul4._find( obj, sub, start, end );\n\t\t}\n\n\t\tpublic static rfind( obj: string, sub: string, start: number | null = null, end: number | null = null ) {\n\t\t\treturn ul4._rfind( obj, sub, start, end );\n\t\t}\n\n\t\tpublic static replace( obj: string, old: string, new_: string, count: number | null = null ) {\n\t\t\tif (count === null)\n\t\t\t\tcount = <number>obj.length;\n\n\t\t\tlet result = [];\n\t\t\twhile (obj.length)\n\t\t\t{\n\t\t\t\tlet pos = obj.indexOf(old);\n\t\t\t\tif (pos === -1 || !count--)\n\t\t\t\t{\n\t\t\t\t\tresult.push(obj);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.push(obj.substr(0, pos));\n\t\t\t\tresult.push(new_);\n\t\t\t\tobj = obj.substr(pos + old.length);\n\t\t\t}\n\t\t\treturn result.join(\"\");\n\t\t}\n\n\t\tpublic static strip( obj: string, chars: string | null = null ) {\n\t\t\tchars = chars || \" \\r\\n\\t\";\n\t\t\tif (typeof(chars) !== \"string\")\n\t\t\t\tthrow new ul4.TypeError(\"strip() requires a string argument\");\n\n\t\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\t\tobj = obj.substr(1);\n\t\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\t\tobj = obj.substr(0, obj.length-1);\n\t\t\treturn obj;\n\t\t}\n\n\t\tpublic static lstrip( obj: string, chars: string | null = null ) {\n\t\t\tchars = chars || \" \\r\\n\\t\";\n\t\t\tif (typeof(chars) !== \"string\")\n\t\t\t\tthrow new ul4.TypeError(\"lstrip() requires a string argument\");\n\n\t\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\t\tobj = obj.substr(1);\n\t\t\treturn obj;\n\t\t}\n\n\t\tpublic static rstrip( obj: string, chars: string | null = null ) {\n\t\t\tchars = chars || \" \\r\\n\\t\";\n\t\t\tif (typeof(chars) !== \"string\")\n\t\t\t\tthrow new ul4.TypeError(\"rstrip() requires a string argument\");\n\n\t\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\t\tobj = obj.substr(0, obj.length-1);\n\t\t\treturn obj;\n\t\t}\n\n\t\tpublic static split( obj: string, sep: string | null = null, count: number | null = null ): string[] {\n\t\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\t\tthrow new ul4.TypeError(\"split() requires a string\");\n\n\t\t\tif (count === null)\n\t\t\t{\n\t\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\t\tif (sep === null)\n\t\t\t\t{\n\t\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\t\tresult.splice(-1);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (sep !== null)\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\twhile (obj.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet pos = obj.indexOf(sep);\n\t\t\t\t\t\tif (pos === -1 || !count--)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult.push(obj);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult.push(obj.substr(0, pos));\n\t\t\t\t\t\tobj = obj.substr(pos + sep.length);\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\twhile (obj.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj = ul4.StrProtocol.lstrip(obj, null);\n\t\t\t\t\t\tlet part;\n\t\t\t\t\t\tif (!count--)\n\t\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/, 1)[0];\n\t\t\t\t\t\tif (part.length)\n\t\t\t\t\t\t\tresult.push(part);\n\t\t\t\t\t\tobj = obj.substr(part.length);\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic static rsplit( obj: string, sep: string | null = null, count: number | null = null ): string[] {\n\t\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\t\tthrow new ul4.TypeError(\"rsplit() requires a string as second argument\");\n\n\t\t\tif (count === null)\n\t\t\t{\n\t\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\t\tif (sep === null)\n\t\t\t\t{\n\t\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\t\tresult.splice(-1);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (sep !== null)\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\twhile (obj.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet pos = obj.lastIndexOf(sep);\n\t\t\t\t\t\tif (pos === -1 || !count--)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult.unshift(obj);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult.unshift(obj.substr(pos+sep.length));\n\t\t\t\t\t\tobj = obj.substr(0, pos);\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\twhile (obj.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj = ul4.StrProtocol.rstrip(obj);\n\t\t\t\t\t\tlet part;\n\t\t\t\t\t\tif (!count--)\n\t\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/);\n\t\t\t\t\t\t\tpart = part[part.length-1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (part.length)\n\t\t\t\t\t\t\tresult.unshift(part);\n\t\t\t\t\t\tobj = obj.substr(0, obj.length-part.length);\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic static splitlines( obj: string, keepends: boolean = false ): string[] {\n\t\t\tlet pos = 0;\n\t\t\tlet lookingAtLineEnd = function lookingAtLineEnd()\n\t\t\t{\n\t\t\t\tlet c = obj[pos];\n\t\t\t\tif (c === '\\n' || c == '\\u000B' || c == '\\u000C' || c == '\\u001C' || c == '\\u001D' || c == '\\u001E' || c == '\\u0085' || c == '\\u2028' || c == '\\u2029')\n\t\t\t\t\treturn 1;\n\t\t\t\tif (c === '\\r')\n\t\t\t\t{\n\t\t\t\t\tif (pos == length-1)\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\tif (obj[pos+1] === '\\n')\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t};\n\n\t\t\tlet result = [], length = obj.length;\n\n\t\t\tfor ( let pos = 0, startpos = 0;;)\n\t\t\t{\n\t\t\t\tif (pos >= length)\n\t\t\t\t{\n\t\t\t\t\tif (startpos != pos)\n\t\t\t\t\t\tresult.push(obj.substring(startpos));\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\tlet lineendlen = lookingAtLineEnd();\n\t\t\t\tif (!lineendlen)\n\t\t\t\t\t++pos;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet endpos = pos + (keepends ? lineendlen : 0);\n\t\t\t\t\tresult.push(obj.substring(startpos, endpos));\n\t\t\t\t\tpos += lineendlen;\n\t\t\t\t\tstartpos = pos;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic static lower( obj: string ): string {\n\t\t\treturn obj.toLowerCase();\n\t\t}\n\n\t\tpublic static upper( obj: string ): string {\n\t\t\treturn obj.toUpperCase();\n\t\t}\n\n\t\tpublic static capitalize( obj: string ) {\n\t\t\tif (obj.length)\n\t\t\t\tobj = obj[0].toUpperCase() + obj.slice(1).toLowerCase();\n\t\t\treturn obj;\n\t\t}\n\n\t\tpublic static join( obj: string, iterable: Iterable<string> ) {\n\t\t\tlet resultlist = [];\n\t\t\tfor (let iter = ul4._iter(iterable);;)\n\t\t\t{\n\t\t\t\tlet item = iter.next();\n\t\t\t\tif (item.done)\n\t\t\t\t\tbreak;\n\t\t\t\tresultlist.push(item.value);\n\t\t\t}\n\t\t\treturn resultlist.join(obj);\n\t\t}\n\n\t\tpublic static startswith( obj: string, prefix: string | string[] ): boolean {\n\t\t\tif (typeof(prefix) === \"string\")\n\t\t\t\treturn obj.substr(0, prefix.length) === prefix;\n\t\t\telse if (ul4._islist(prefix))\n\t\t\t{\n\t\t\t\tfor (let singlepre of prefix)\n\t\t\t\t{\n\t\t\t\t\tif (obj.substr(0, singlepre.length) === singlepre)\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthrow new ul4.TypeError(\"startswith() argument must be string\");\n\t\t}\n\n\t\tpublic static endswith( obj: string, suffix: string | string[] ): boolean {\n\t\t\tif (typeof(suffix) === \"string\")\n\t\t\t\treturn obj.substr(obj.length-suffix.length) === suffix;\n\t\t\telse if (ul4._islist(suffix))\n\t\t\t{\n\t\t\t\tfor (let singlesuf of suffix)\n\t\t\t\t{\n\t\t\t\t\tif (obj.substr(obj.length-singlesuf.length) === singlesuf)\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthrow new ul4.TypeError(\"endswith() argument must be string or list of strings\");\n\t\t}\n\t}\n\tul4.expose(ul4.StrProtocol.count, [\"sub\", \"start=\", null, \"end=\", null]);\n\tul4.expose(ul4.StrProtocol.find, [\"sub\", \"start=\", null, \"end=\", null]);\n\tul4.expose(ul4.StrProtocol.rfind, [\"sub\", \"start=\", null, \"end=\", null]);\n\tul4.expose(ul4.StrProtocol.replace, [\"old\", \"new\", \"count=\", null]);\n\tul4.expose(ul4.StrProtocol.strip, [\"chars=\", null]);\n\tul4.expose(ul4.StrProtocol.lstrip, [\"chars=\", null]);\n\tul4.expose(ul4.StrProtocol.rstrip, [\"chars=\", null]);\n\tul4.expose(ul4.StrProtocol.split, [\"sep=\", null, \"count=\", null]);\n\tul4.expose(ul4.StrProtocol.rsplit, [\"sep=\", null, \"count=\", null]);\n\tul4.expose(ul4.StrProtocol.splitlines, [\"keepends=\", false]);\n\tul4.expose(ul4.StrProtocol.lower, []);\n\tul4.expose(ul4.StrProtocol.upper, []);\n\tul4.expose(ul4.StrProtocol.capitalize, []);\n\tul4.expose(ul4.StrProtocol.join, [\"iterable\"]);\n\tul4.expose(ul4.StrProtocol.startswith, [\"prefix\"]);\n\tul4.expose(ul4.StrProtocol.endswith, [\"suffix\"]);\n\n\n\texport class _Set{\n\n\t\tpublic items: any;\n\t\tpublic __type__: string = \"set\";\n\n\t\t/**\n\t\t * add items to Set\n\t\t * @param {any[]} items \n\t\t */\n\t\tadd(...items: string[]) {\n\t\t\tfor (let item of items)\n\t\t\t\tthis.items[item] = true;\n\t\t}\n\n\t\thas( item: string ): boolean {\n\t\t\treturn this.items[item] ? true : false;\n\t\t}\n\t\t__getattr__( attrname: string ) {\n\t\t\tlet self = this;\n\t\t\tswitch (attrname)\n\t\t\t{\n\t\t\t\tcase \"add\":\n\t\t\t\t\treturn ul4.expose([\"*items\"], function add(items: any[]){ self.add(...items); });\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new ul4.AttributeError(this, attrname);\n\t\t\t}\n\t\t}\n\n\t\t__contains__( item: string ) {\n\t\t\treturn this.items[item] || false;\n\t\t}\n\n\t\t__bool__() {\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!this.items.hasOwnProperty(item))\n\t\t\t\t\tcontinue;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\t__repr__() {\n\t\t\tlet v = [];\n\t\t\tv.push(\"{\");\n\t\t\tlet i = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!this.items.hasOwnProperty(item))\n\t\t\t\t\tcontinue;\n\t\t\t\tif (i++)\n\t\t\t\t\tv.push(\", \");\n\t\t\t\tv.push(ul4._repr(item));\n\t\t\t}\n\t\t\tif (!i)\n\t\t\t\tv.push(\"/\");\n\t\t\tv.push(\"}\");\n\t\t\treturn v.join(\"\");\n\t\t}\n\n\t\t__eq__( other: any ) {\n\t\t\t// We'll check that everything in ``this`` is in ``other``\n\t\t\t// and if both have the same number of items they are equal\n\t\t\tif (ul4._isset(other))\n\t\t\t{\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let item in this.items)\n\t\t\t\t{\n\t\t\t\t\tif (!other.has(item))\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t// count the number of items we have\n\t\t\t\t\t++count;\n\t\t\t\t}\n\t\t\t\treturn other.size == count;\n\t\t\t}\n\t\t\telse if (ul4._isul4set(other))\n\t\t\t{\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let item in this.items)\n\t\t\t\t{\n\t\t\t\t\tif (!other[item])\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t// count the number of items we have\n\t\t\t\t\t++count;\n\t\t\t\t}\n\t\t\t\t// Substract the number of items that ``other`` has\n\t\t\t\tfor (let item in other.items)\n\t\t\t\t\t--count;\n\t\t\t\treturn count == 0;\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\n\t\t__le__( other: any ) {\n\t\t\t// check that ``this`` is a subset of ``other``,\n\t\t\t// i.e. everything in ``this`` is also in ``other``\n\t\t\tif (ul4._isset(other))\n\t\t\t{\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let item in this.items)\n\t\t\t\t{\n\t\t\t\t\tif (!other.has(item))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (ul4._isul4set(other))\n\t\t\t{\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let item in this.items)\n\t\t\t\t{\n\t\t\t\t\tif (!other.items[item])\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse\n\t\t\t\tul4._unorderable(\"<\", this, other);\n\t\t}\n\n\t\t__ge__( other: any ) {\n\t\t\t// check that ``this`` is a superset of ``other``,\n\t\t\t// i.e. everything in ``other`` is also in ``this``\n\t\t\tif (ul4._isset(other))\n\t\t\t{\n\t\t\t\tlet result = true;\n\t\t\t\tother.forEach(function(value: string) {\n\t\t\t\t\tif (!other.items[value])\n\t\t\t\t\t\tresult = false;\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse if (ul4._isul4set(other))\n\t\t\t{\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let item in other.items)\n\t\t\t\t{\n\t\t\t\t\tif (!this.items[item])\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse\n\t\t\t\tul4._unorderable(\"<=\", this, other);\n\t\t}\n\t}\n\t// TODO\n\texport class slice {\n\t\tpublic start: string;\n\t\tpublic stop: string;\n\n\t\tconstructor( start: string, stop: string ) {\n\t\t\tthis.start = start;\n\t\t\tthis.stop = stop;\n\t\t}\n\t}\n\n\texport class Exception extends Error {\n\t\tpublic cause: any;\n\t\tconstructor( message: string ) {\n\t\t\tsuper( message );\n\t\t\tthis.name = \"UL4 Exception\";\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param attrname \n\t\t * @throws {ul4.AttributeError}\n\t\t */\n\t\tpublic __getattr__( attrname: string ) {\n\t\t\tswitch (attrname)\n\t\t\t{\n\t\t\t\tcase \"cause\":\n\t\t\t\t\treturn this.cause;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new ul4.AttributeError(this, attrname);\n\t\t\t}\n\t\t}\n\t}\n\n\texport class ArgumentError extends Exception {}\n\n\texport class TypeError extends Exception {};\n\n\texport class AttributeError extends Exception {\n\t\tpublic obj: any;\n\t\tpublic attrname: string;\n\t\tconstructor( obj: any, attrname: string) {\n\t\t\tsuper(\"object of type \" + ul4._type(obj) + \" has no attribute \" + ul4._repr(attrname));\n\t\t\tthis.obj = obj;\n\t\t\tthis.attrname = attrname;\n\t\t}\n\t}\n\n\texport class ValueError extends ul4.Exception {};\n\n}\n\nexport namespace ul4on {\n\t\n\tlet _registry: any = {}\n\n\t/**\n\t * Register the constructor function ``f`` under the name ``name`` with the UL4ON machinery\n\t * @param name \n\t * @param f \n\t */\n\texport function register( name: string, f: Function ) {\n\t\tf.prototype.ul4onname = name;\n\t\t_registry[name] = f;\n\t}\n\n\t/**\n\t * Return a string that contains the object ``obj`` in the UL4ON serialization format\n\t * @param obj \n\t * @param indent \n\t */\n\texport function dumps( obj: any, indent: any ) {\n\t\tlet encoder = new Encoder( indent );\n\t\tencoder.dump( obj );\n\t\treturn encoder.finish();\n\t}\n\n\texport function loads( data: any, registry: any = null ) {\n\t\tlet decoder = new Decoder( data, registry );\n\t\treturn decoder.load();\n\t}\n\n\texport class Encoder {\n\t\tpublic data: any[];\n\t\tpublic indent: any;\n\t\tprivate _level: number;\n\t\tprivate _strings2index: any;\n\t\tprivate _ids2index: any;\n\t\tprivate _backrefs: number;\n\t\t/**\n\t\t * create a new Encoder object\n\t\t * @param ident \n\t\t */\n\t\tconstructor( indent: any = null ) {\n\t\t\tthis.data = [];\n\t\t\tthis._level = 0;\n\t\t\tthis._strings2index = {};\n\t\t\tthis._ids2index = {};\n\t\t\tthis._backrefs = 0;\n\t\t}\n\n\t\tprivate _line( line: string, ...args: any[] ) {\n\t\t\tif( this.indent !== null ) {\n\t\t\t\tfor( let i = 0; i < this._level; ++i )\n\t\t\t\t\tthis.data.push( this.indent );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif( this.data.length )\n\t\t\t\t\tthis.data.push( \" \" );\n\t\t\t}\n\t\t\tthis.data.push( line );\n\n\t\t\tif( args.length ) {\n\t\t\t\tlet oldindent = this.indent;\n\t\t\t\tthis.indent = null;\n\t\t\t\tfor (let arg of args)\n\t\t\t\t\tthis.dump(arg);\n\t\t\t\tthis.indent = oldindent;\n\t\t\t}\n\t\t\tif (this.indent !== null)\n\t\t\t\tthis.data.push(\"\\n\");\n\t\t}\n\n\t\t/**\n\t\t * return the complete string written to the buffer\n\t\t */\n\t\tpublic finish(): string {\n\t\t\treturn this.data.join(\"\");\n\t\t}\n\n\t\tpublic dump( obj: any ) {\n\t\t\tif( obj === null ) {\n\t\t\t\tthis._line( \"n\" );\n\t\t\t}\n\t\t\telse if( typeof( obj ) === \"boolean\" ) {\n\t\t\t\tthis._line(obj ? \"bT\" : \"bF\");\n\t\t\t}\n\t\t\telse if ( typeof( obj ) === \"number\" ) {\n\t\t\t\tlet type: string = (Math.round(obj) == obj) ? \"i\" : \"f\";\n\t\t\t\tthis._line(type + obj);\n\t\t\t}\n\t\t\telse if( typeof( obj ) === \"string\" ) {\n\t\t\t\tlet index = this._strings2index[obj];\n\t\t\t\tif ( typeof( index ) !== \"undefined\" )\n\t\t\t\t{\n\t\t\t\t\tthis._line( \"^\" + index );\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._strings2index[obj] = this._backrefs++;\n\t\t\t\t\tlet dump = ul4._str_repr( obj ).replace( \"<\", \"\\\\x3c\" );\n\t\t\t\t\tthis._line( \"S\" + dump );\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if( ul4._iscolor( obj ) )\n\t\t\t\tthis._line( \"c\", obj.r(), obj.g(), obj.b(), obj.a() );\n\t\t\telse if ( ul4._isdate( obj ) )\n\t\t\t\tthis._line(\"x\", obj.year(), obj.month(), obj.day() );\n\t\t\telse if ( ul4._isdatetime( obj ) )\n\t\t\t\tthis._line(\"z\", obj.getFullYear(), obj.getMonth()+1, obj.getDate(), obj.getHours(), obj.getMinutes(), obj.getSeconds(), obj.getMilliseconds() * 1000);\n\t\t\telse if ( ul4._istimedelta( obj ) )\n\t\t\t\tthis._line(\"t\", obj.days(), obj.seconds(), obj.microseconds());\n\t\t\telse if ( ul4._ismonthdelta( obj ) )\n\t\t\t\tthis._line(\"m\", obj.months());\n\t\t\telse if ( obj instanceof ul4.slice )\n\t\t\t\tthis._line(\"r\", obj.start, obj.stop );\n\t\t\telse if ( obj.ul4onname && obj.ul4ondump ) {\n\t\t\t\tif ( obj.__id__ ){\n\t\t\t\t\tlet index = this._ids2index[obj.__id__];\n\t\t\t\t\tif ( typeof( index ) != \"undefined\")\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._line( \"^\" + index );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._ids2index[obj.__id__] = this._backrefs++;\n\t\t\t\t}\n\t\t\t\tthis._line( \"O\", obj.ul4onname );\n\t\t\t\t++this._level;\n\t\t\t\tobj.ul4ondump( this );\n\t\t\t\t--this._level;\n\t\t\t\tthis._line( \")\" );\n\t\t\t}\n\t\t\telse if ( ul4._islist( obj ) ) {\n\t\t\t\tthis._line(\"l\");\n\t\t\t\t++this._level;\n\t\t\t\tfor( let item of obj )\n\t\t\t\t\tthis.dump( item );\n\t\t\t\t--this._level;\n\t\t\t\tthis._line( \"]\" );\n\t\t\t}\n\t\t\telse if ( ul4._ismap( obj ) ) {\n\t\t\t\tthis._line( \"e\" );\n\t\t\t\t++this._level;\n\t\t\t\tfor( let [key, value] of obj.entries() ) {\n\t\t\t\t\tthis.dump( key );\n\t\t\t\t\tthis.dump( value );\n\t\t\t\t}\n\t\t\t\t--this._level;\n\t\t\t\tthis._line( \"}\" );\n\t\t\t}\n\t\t\telse if( ul4._isdict( obj ) ) {\n\t\t\t\tthis._line( \"d\" );\n\t\t\t\t++this._level;\n\t\t\t\tfor ( let key in obj ) {\n\t\t\t\t\tthis.dump( key );\n\t\t\t\t\tthis.dump( obj[key] );\n\t\t\t\t}\n\t\t\t\t--this._level;\n\t\t\t\tthis._line(\"}\");\n\t\t\t}\n\t\t\telse if( ul4._isset( obj ) ) {\n\t\t\t\tthis._line( \"y\" );\n\t\t\t\t++this._level;\n\t\t\t\tfor ( let item of obj.values() )\n\t\t\t\t\tthis.dump(item);\n\t\t\t\t--this._level;\n\t\t\t\tthis._line( \"}\" );\n\t\t\t}\n\t\t\telse \n\t\t\t\tthrow new ul4.ValueError( \"can't create UL4ON dump of object \" + ul4._repr(obj) )\n\t\t}\n\t}\n\n\texport class Decoder {\n\t\tpublic pos: number;\n\t\tpublic backrefs: any[];\n\t\tpublic stack: any[];\n\t\tpublic data: any;\n\t\tpublic registry: any;\n\n\t\tconstructor( data: any, registry: any = null ) {\n\t\t\tthis.data = data || null;\n\t\t\tthis.registry = registry;\n\t\t\tthis.pos = 0;\n\t\t\tthis.backrefs = [];\n\t\t\tthis.stack = []; // Use for informative error messages\n\t\t}\n\n\t\tpublic load() {};\n\t}\n}"],"names":["helpers","_havemap","_haveset","_js_Date","Date","Map","prototype","Set","map","key","value","set","ul4","_Set","_i","items","_emptymap","items_3","_a","item","add","_nextid","operator","obj1","obj2","TypeError","_type","f","signature","options","name","_ul4_name","_islist","Signature","_ul4_signature","_ul4_needsobject","needsobject","_ul4_needscontext","needscontext","obj","sub","start","end","length","_bound","substring","slice","result","indexOf","numbertypes","__eq__","_isdatetime","getTime","i","_eq","_isobject","hasOwnProperty","_ismap","has","get","result_1","forEach","result_2","size","result_3","_isset","result_4","upper","_isstr","count","lastIndex","Object","toString","call","__proto__","Proto","_repr_internal","ascii","_str_repr","_isdate","_date_repr","_datetime_repr","__repr__","_list_repr","_map_repr","_set_repr","_object_repr","v","push","join","i_1","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","ms","getMilliseconds","_lpad","date","_date","str","squote","dquote","str_1","c","quote","str_2","code","charCodeAt","escape_1","test","string","pad","len","Math","round","ul4type","Protocol","lastIndexOf","index","next","this","done","_isiter","__iter__","keys_1","values_1","_isul4set","_iter","keys_2","__id__","constructor","other","_super","_this","__extends","__str__","_unorderable","args","argNames","remargs","nextDefault","lastArgname","remkwargs","args_1","argName","defaultValue","substr","kwargs","finalargs","decname","arg","ArgumentError","_repr","prefix","_setmap","StrProtocol","ListProtocol","DateProtocol","attrname","AttributeError","__getattr__","attrs","attr","realattr","Function","exc","_emptyset","items_4","pos","items_5","splice","_count","_find","_rfind","_makeset","expose","append","insert","pop","find","rfind","old","new_","chars","sep","split","lstrip","part","unshift","rstrip","keepends","pos_1","startpos","lineendlen","endpos","toLowerCase","toUpperCase","iterable","resultlist","iter","prefix_1","singlepre","suffix","suffix_1","singlesuf","replace","strip","rsplit","splitlines","lower","capitalize","startswith","endswith","items_6","self","result_5","stop","message","Exception","cause","Error","ul4on","ul4onname","indent","encoder","Encoder","dump","finish","data","registry","Decoder","load","_level","_strings2index","_ids2index","_backrefs","line","oldindent","args_2","_line","type","_iscolor","r","g","b","a","_istimedelta","days","seconds","microseconds","_ismonthdelta","months","ul4ondump","obj_1","_b","entries","_c","_isdict","ValueError","_e","values","_d","backrefs","stack"],"mappings":"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"}